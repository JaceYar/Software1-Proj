| Use Case Name | Purchase from Store |
|---------------|-----------------|
| Actor         | Guest          |
| Author        | [Aaron]    |
| Preconditions | 1. The guest is logged into the hotel system <br>2. The guest has browsed the product catalog and identified items to purchase <br>3. The guest is checked in (or the system allows store purchases for registered guests as per policy) <br>4. Products are available in inventory |
| Postconditions | 1. The selected products are recorded as purchased and associated with the guest (and room/stay if checked in) <br>2. Inventory for purchased items is updated <br>3. Payment is recorded and the guest receives confirmation <br>4. Charges are applied to the room bill (if checked in) or paid at time of purchase |
| Main Success Scenario | 1. The guest navigates to the Store from the main dashboard <br>2. The guest adds one or more products to the cart (product, quantity, size/variant if applicable) <br>3. The guest views the cart and adjusts quantities or removes items if desired <br>4. The guest proceeds to checkout <br>5. The system displays order summary (items, quantities, prices, total) and confirms guest/room for billing <br>6. The guest confirms payment method (charge to room or enter card) <br>7. The system validates payment and inventory availability <br>8. The system records the sale and updates inventory <br>9. The system applies charges to the room bill or completes the payment transaction <br>10. The system displays order confirmation and, if applicable, delivery or pickup details <br>11. The guest acknowledges the confirmation |
| Extensions | 2a. **Product no longer available**<br>&nbsp;&nbsp;&nbsp;&nbsp;2a1 The system notifies the guest that the item is out of stock<br>&nbsp;&nbsp;&nbsp;&nbsp;2a2 The guest removes the item or selects an alternative<br>&nbsp;&nbsp;&nbsp;&nbsp;2a3 Continue from step 3<br>7a. **Payment failed**<br>&nbsp;&nbsp;&nbsp;&nbsp;7a1 The system displays payment error message<br>&nbsp;&nbsp;&nbsp;&nbsp;7a2 The guest corrects payment details or chooses another method<br>&nbsp;&nbsp;&nbsp;&nbsp;7a3 Return to step 6<br>7b. **Guest not checked in and no payment method**<br>&nbsp;&nbsp;&nbsp;&nbsp;7b1 The system prompts for a valid payment method to complete purchase<br>&nbsp;&nbsp;&nbsp;&nbsp;7b2 Use case ends if guest cannot provide payment |
| Special Reqs | ● Store purchases for checked-in guests must be chargeable to the room and visible on the final bill (Process Check-Out)<br>● Inventory must be decremented atomically with the sale<br>● Payment and order details must be stored securely and logged for auditing |
